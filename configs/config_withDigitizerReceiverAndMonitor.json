{
  "version": 7,
  "group": "faser",
  "components": [
    {
      "name": "digitizer012",
      "host": "localhost",
      "port": 5556,
      "type": "DigitizerReceiver",
      "loglevel": {"core": "DEBUG", "module": "DEBUG"},
      "settings": {
        "host_pc": "192.168.122.2",
        "digitizer_hw_address":  "0x04320000",
        "buffer_length":         630,
        "buffer_n_post_samples": 120,
        "trigger_acquisition": {"external": false, "software": true, "internal": false},
        "trigger_software": {"enable": true, "rate": 1},
        "trigger_internal": [{"group" : 0, "enable": 0, "logic": "OnlyA", "threshold_ch0": 8000, "threshold_ch1": 8000, "output_width":32},
                             {"group" : 1, "enable": 0, "logic": "OnlyA", "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 2, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 3, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 4, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 5, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 6, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 7, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32}],
        "trigger_internal_polarity": "over",
        "channel_readout": [{"channel": 0,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 1,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 2,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 3,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 4,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 5,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 6,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 7,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 8,  "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 9,  "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 10, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 11, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 12, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 13, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 14, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 15, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0}]
      },
      "connections": {
        "senders": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "*",
            "port": 8100
          }
        ]
      }
    },
    {
      "name": "eventbuilder01",
      "host": "localhost",
      "port": 5557,
      "type": "EventBuilderFaser",
      "loglevel": {"core": "INFO", "module": "DEBUG"},
      "settings": {
        "stats_uri": "tcp://localhost:7000",
        "maxPending": 10,
        "timeout_ms": 1000
      },
      "connections": {
        "receivers": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "localhost",
            "port": 8100
          }
        ],
        "senders": [
          {
            "type": "pubsub",
            "chid": 100,
            "transport": "tcp",
            "host": "*",
            "port": 8200
          },
          {
            "type": "pubsub",
            "chid": 101,
            "transport": "tcp",
            "host": "*",
            "port": 8201
          },
          {
            "type": "pubsub",
            "chid": 102,
            "transport": "tcp",
            "host": "*",
            "port": 8202
          },
          {
            "type": "pubsub",
            "chid": 103,
            "transport": "tcp",
            "host": "*",
            "port": 8203
          },
          {
            "type": "pubsub",
            "chid": 116,
            "transport": "tcp",
            "host": "*",
            "port": 8216
          },
          {
            "type": "pubsub",
            "chid": 117,
            "transport": "tcp",
            "host": "*",
            "port": 8217
          },
          {
            "type": "pubsub",
            "chid": 118,
            "transport": "tcp",
            "host": "*",
            "port": 8218
          }
        ]
      }
    },
    {
      "name": "filewriter",
      "host": "localhost",
      "port": 5558,
      "type": "FileWriterFaser",
      "loglevel": {"core": "INFO", "module": "DEBUG"},
      "settings": {
        "stats_uri": "tcp://localhost:7000",
        "max_filesize": 100000,
        "buffer_size": 4000,
        "filename_pattern": "/tmp/meehan/FaserDigitizerTest-%c-%r-%n.raw",
        "channel_names": ["Physics","Calibration","Monitoring","TLBMonitoring","Corrupted","Incomplete","Duplicate"]
      },
      "connections": {
        "receivers": [
          {
            "type": "pubsub",
            "chid": 0,
            "transport": "tcp",
            "host": "localhost",
            "port": 8200
          },
          {
            "type": "pubsub",
            "chid": 1,
            "transport": "tcp",
            "host": "localhost",
            "port": 8201
          },
          {
            "type": "pubsub",
            "chid": 2,
            "transport": "tcp",
            "host": "localhost",
            "port": 8202
          },
          {
            "type": "pubsub",
            "chid": 3,
            "transport": "tcp",
            "host": "localhost",
            "port": 8203
          },
          {
            "type": "pubsub",
            "chid": 4,
            "transport": "tcp",
            "host": "localhost",
            "port": 8216
          },
          {
            "type": "pubsub",
            "chid": 5,
            "transport": "tcp",
            "host": "localhost",
            "port": 8217
          },
          {
            "type": "pubsub",
            "chid": 6,
            "transport": "tcp",
            "host": "localhost",
            "port": 8218
          }
        ]
      }
    },
    {
      "name": "digitizermonitor01",
      "host": "localhost",
      "port": 5559,
      "type": "DigitizerMonitor",
      "loglevel": {"core": "DEBUG", "module": "DEBUG"},
      "settings": {
        "stats_uri": "tcp://localhost:7000",
        "fragmentID": 262144,
        "influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
        "influxDb_name": "DAQlingMetrics",
        "buffer_length": 630
      },
      "connections": {
        "receivers": [
          {
            "type": "pubsub",
            "chid": 0,
            "transport": "tcp",
            "host": "localhost",
            "port": 8200
          }
        ]
      }
    }
  ]
}

