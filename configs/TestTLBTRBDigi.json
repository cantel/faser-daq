{
    "version": 7,
    "group": "faser",
    "components": [
	{
	    "name": "tlbreceiver01",
	    "host": "localhost",
	    "port": 5556,
	    "type": "TriggerReceiver",
	    "loglevel": {"core": "INFO", "module": "DEBUG"},
	    "settings": {
		"influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
		"influxDb_name": "DAQlingMetrics",
		"SamplingPhase": [false, false, false, false, false, false, false, false],
		"InputDelay": [0, 0, 0, 0, 0, 0, 0, 0],
		"RandomTriggerRate": 5,
		"Prescale": [0, 0, 0, 0, 1, 0],
		"TrackerDelay": 0,
		"DigitizerDelay": 0,
		"LHC_CLK": false,
		"OrbitDelay": 0,
		"Deadtime": 500,
		"MonitoringRate": 673380,
		"OutputDestination": 0,
		"Input": [false, false, false, false, false, false, false, false],
		"BusyDisable": true,
		"EnableTriggerData": true,
		"EnableMonitoringData": true,
		"Derandomize": true,
		"ReadoutFIFOReset": false,
		"LUTConfig": "../gpiodrivers/TLBAccess/config/LUT1.txt",
		"usb_device_no": 48
	    },
	    "connections": {
		"senders": [
		    {
			"type": "pair",
			"chid": 0,
			"transport": "tcp",
			"host": "*",
			"port": 8100
		    }
		]
	    }
	},
	{
	    "name": "trackerreceiver",
	    "host": "localhost",
	    "port": 5557,
	    "type": "TrackerReceiver",
	    "loglevel": {"core": "INFO", "module": "INFO"},
	    "settings": {
		"influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
		"influxDb_name": "DAQlingMetrics",
		"L1Atype" : "external",
		"emulation" : false,
		"emulatorFile" : "/home/otheiner/FASER_DAQ/DataTaking_4modules_10kL1A.daq",
		"moduleMask" : [false, false, false, false, false, false, false, false],
		"moduleConfigFiles": {"0" : "../configs/TemplateModuleCfg0.json",
				      "1" : "../configs/TemplateModuleCfg1.json",
				      "2" : "../configs/TemplateModuleCfg2.json",
				      "3" : "../configs/TemplateModuleCfg3.json",
				      "4" : "../configs/TemplateModuleCfg4.json",
				      "5" : "../configs/TemplateModuleCfg5.json",
				      "6" : "../configs/TemplateModuleCfg6.json",
				      "7" : "../configs/TemplateModuleCfg7.json"},
		"moduleClkCmdMask" : [false, false, false, false, false, false, false, false],
		"TLBClockSel" : true,
		"BCREn" : true,
		"L1AEn" : true,
		"SoftCounterMuxEn" : false,
		"L1CounterReset" : false,
		"ErrCntReset" : false,
		"FifoReset" : false,
		"usb_device_no": 2
	    },
	    "connections": {
		"senders": [
		    {
			"type": "pair",
			"chid": 0,
			"transport": "tcp",
			"host": "*",
			"port": 8101
		    }
		]
	    }
	},
	{
	    "name": "digitizer01",
	    "host": "localhost",
	    "port": 5558,
	    "type": "DigitizerReceiver",
	    "loglevel": {"core": "INFO", "module": "DEBUG"},
	    "settings": {
        "stats_uri": "tcp://localhost:7000",
        "influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
        "influxDb_name": "DAQlingMetrics",
        "host_pc": "192.168.122.2",
        "digitizer_hw_address":  "0x04320000",
        "buffer_length":         630,
        "buffer_n_post_samples": 120,
        "internal_sawtooth":     false,
        "trigger_acquisition": {"external": 0, "software": 1, "internal": 0},
        "trigger_software": {"enable": true, "rate": 1},
        "trigger_internal": [{"group" : 0, "enable": 0, "logic": "OnlyA", "threshold_ch0": 8000, "threshold_ch1": 8000, "output_width":32},
                             {"group" : 1, "enable": 0, "logic": "OnlyA", "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 2, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 3, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 4, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 5, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 6, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32},
                             {"group" : 7, "enable": 0, "logic": "OR",    "threshold_ch0": 500,  "threshold_ch1": 500,  "output_width":32}],
        "trigger_internal_polarity": "over",
        "channel_readout": [{"channel": 0,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 1,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 2,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 3,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 4,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 5,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 6,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 7,  "enable": 1, "dynamic_range": 2.0,  "dc_offset": 0.0},
                            {"channel": 8,  "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 9,  "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 10, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 11, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 12, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 13, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 14, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0},
                            {"channel": 15, "enable": 0, "dynamic_range": 0.5,  "dc_offset": 0.0}]
	    },
	    "connections": {
		"senders": [
		    {
			"type": "pair",
			"chid": 0,
			"transport": "tcp",
			"host": "*",
			"port": 8102
		    }
		]
	    }
	},
	{
	    "name": "eventbuilder01",
	    "host": "localhost",
	    "port": 5559,
	    "type": "EventBuilderFaser",
	    "loglevel": {"core": "INFO", "module": "DEBUG"},
	    "settings": {
		"stats_uri": "tcp://localhost:7000",
		"influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
		"influxDb_name": "DAQlingMetrics",
		"maxPending": 10,
		"timeout_ms": 10000
	    },
	    "connections": {
		"receivers": [
		    {
			"type": "pair",
			"chid": 0,
			"transport": "tcp",
			"host": "localhost",
			"port": 8100
		    },
		    {
			"type": "pair",
			"chid": 1,
			"transport": "tcp",
			"host": "localhost",
			"port": 8101
		    },
		    {
			"type": "pair",
			"chid": 2,
			"transport": "tcp",
			"host": "localhost",
			"port": 8102
		    }
		],
		"senders": [
		    {
			"type": "pubsub",
			"chid": 100,
			"transport": "tcp",
			"host": "*",
			"port": 8200
		    },
		    {
			"type": "pubsub",
			"chid": 101,
			"transport": "tcp",
			"host": "*",
			"port": 8201
		    },
		    {
			"type": "pubsub",
			"chid": 102,
			"transport": "tcp",
			"host": "*",
			"port": 8202
		    },
		    {
			"type": "pubsub",
			"chid": 103,
			"transport": "tcp",
			"host": "*",
			"port": 8203
		    },
		    {
			"type": "pubsub",
			"chid": 116,
			"transport": "tcp",
			"host": "*",
			"port": 8216
		    },
		    {
			"type": "pubsub",
			"chid": 117,
			"transport": "tcp",
			"host": "*",
			"port": 8217
		    },
		    {
			"type": "pubsub",
			"chid": 118,
			"transport": "tcp",
			"host": "*",
			"port": 8218
		    }
		]
	    }
	},
	{
	    "name": "filewriter",
	    "host": "localhost",
	    "port": 5560,
	    "type": "FileWriterFaser",
	    "loglevel": {"core": "INFO", "module": "INFO"},
	    "settings": {
		"stats_uri": "tcp://localhost:7000",
		"max_filesize": 500000,
		"buffer_size": 4000,
		"filename_pattern": "/tmp/meehan/Faser-tlbtrbdigi-test--%c-%r-%n.raw",
		"channel_names": ["Physics","Calibration","Monitoring","TLBMonitoring",
				  "Corrupted","Incomplete","Duplicate"]
	    },
	    "connections": {
		"receivers": [
		    {
			"type": "pubsub",
			"chid": 0,
			"transport": "tcp",
			"host": "localhost",
			"port": 8200
		    },
		    {
			"type": "pubsub",
			"chid": 1,
			"transport": "tcp",
			"host": "localhost",
			"port": 8201
		    },
		    {
			"type": "pubsub",
			"chid": 2,
			"transport": "tcp",
			"host": "localhost",
			"port": 8202
		    },
		    {
			"type": "pubsub",
			"chid": 3,
			"transport": "tcp",
			"host": "localhost",
			"port": 8203
		    },
		    {
			"type": "pubsub",
			"chid": 4,
			"transport": "tcp",
			"host": "localhost",
			"port": 8216
		    },
		    {
			"type": "pubsub",
			"chid": 5,
			"transport": "tcp",
			"host": "localhost",
			"port": 8217
		    },
		    {
			"type": "pubsub",
			"chid": 6,
			"transport": "tcp",
			"host": "localhost",
			"port": 8218
		    }
		]
	    }
	}
    ]
}
