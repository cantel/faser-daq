{
  "version": 7,
  "group": "faser",
  "components": [
    {
      "name": "tlbreceiver01",
      "host": "localhost",
      "port": 5556,
      "type": "TriggerReceiver",
      "loglevel": {"core": "INFO", "module": "DEBUG"},
      "settings": {
        "influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
        "influxDb_name": "DAQlingMetrics",
        "SamplingPhase": [false, false, false, false, false, false, false, false],
        "InputDelay": [0, 0, 0, 0, 0, 0, 0, 0],
        "RandomTriggerRate": 5,
        "Prescale": [0, 0, 0, 0, 1, 0],
        "TrackerDelay": 0,
        "DigitizerDelay": 0,
        "LHC_CLK": false,
        "OrbitDelay": 0,
        "Deadtime": 500,
        "MonitoringRate": 673380,
        "OutputDestination": 0,
        "Input": [false, false, false, false, false, false, false, false],
        "BusyDisable": true,
        "EnableTriggerData": true,
        "EnableMonitoringData": true,
        "Derandomize": false,
        "ReadoutFIFOReset": false,
        "LUTConfig": "/home/cantel/TLBConfigFiles/LUT1.txt", 
        "usb_device_no": 42
      },
      "connections": {
        "senders": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "*",
            "port": 8100
          }
        ]
      }
    },
    {
      "name": "trackerreceiver",
      "host": "localhost",
      "port": 5557, 
      "type": "TrackerReceiver",
      "loglevel": {"core": "INFO", "module": "INFO"},
      "settings": {
        "influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
        "influxDb_name": "DAQlingMetrics",
        "L1Atype" : "external",  
        "emulation" : false,
        "emulatorFile" : "/home/otheiner/FASER_DAQ/DataTaking_4modules_10kL1A.daq",
        "moduleMask" : [false, false, false, false, false, false, false, false], 
        "moduleConfigFiles": {"0" : "../configs/TemplateModuleCfg0.json",
                              "1" : "../configs/TemplateModuleCfg1.json",
                              "2" : "../configs/TemplateModuleCfg2.json",
                              "3" : "../configs/TemplateModuleCfg3.json",
                              "4" : "../configs/TemplateModuleCfg4.json",
                              "5" : "../configs/TemplateModuleCfg5.json",
                              "6" : "../configs/TemplateModuleCfg6.json",
                              "7" : "../configs/TemplateModuleCfg7.json"},
        "moduleClkCmdMask" : [false, false, false, false, false, false, false, false],
        "TLBClockSel" : true,
        "BCREn" : true,
        "L1AEn" : true,
        "SoftCounterMuxEn" : false,
        "L1CounterReset" : false,
        "ErrCntReset" : false,
        "FifoReset" : false,
        "usb_device_no": 43
       },
      "connections": {
        "senders": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "*",
            "port": 8101
          }
        ]
      }
    },
    {
      "name": "digitizer01",
      "host": "localhost",
      "port": 5558,
      "type": "DigitizerReceiver",
      "loglevel": {"core": "INFO", "module": "INFO"},
      "settings": {
          "stats_uri": "tcp://localhost:7000",
          "ip":                    "192.168.122.2",
          "vme_base_address":      "0x04320000",
          "buffer_length":         "0x0A",
          "buffer_n_post_samples": "0x20",
          "internal_sawtooth":     false,
          "global_trigger": { "lvds": 0, "external": 0, "software": 1, "polarity": "under", "coincidence": false, "nchan": 2, "timewindow": 20},
          "channel_config": [{"group" : 0, "trig_enable": 1, "trig_logic": "OnlyA", "trig_width":32,
                              "chanA" : {"channel": 0, "dynamic_range": 2.0, "enable_read": 1, "dc_offset": 0.0, "trig_threshold": 10000},
                              "chanB" : {"channel": 1, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500}
                             },
                             {"group" : 1, "trig_enable": 1, "trig_logic": "OnlyA", "trig_width":32,
                              "chanA" : {"channel": 2, "dynamic_range": 2.0, "enable_read": 1, "dc_offset": 0.0, "trig_threshold": 10000},
                              "chanB" : {"channel": 3, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500}
                             },
                             {"group" : 2, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 4, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500},
                              "chanB" : {"channel": 5, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500}
                             },
                             {"group" : 3, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 6, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500},
                              "chanB" : {"channel": 7, "dynamic_range": 2.0, "enable_read": 0, "dc_offset": 0.0, "trig_threshold": 500}
                             },
                             {"group" : 4, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 8, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500},
                              "chanB" : {"channel": 9, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500}
                             },
                             {"group" : 5, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 10, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500},
                              "chanB" : {"channel": 11, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500}
                             },
                             {"group" : 6, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 12, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500},
                              "chanB" : {"channel": 13, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500}
                             },
                             {"group" : 7, "trig_enable": 0, "trig_logic": "OR", "trig_width":32,
                              "chanA" : {"channel": 14, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500},
                              "chanB" : {"channel": 15, "dynamic_range": 0.5, "enable_read": 0, "dc_offset": 0, "trig_threshold": 500}
                             }],
          "frontpanel_config" : {"lemo" : {"trig_in" : "ttl" , "trig_out" : "ttl"}} 
      },
      "connections": {
        "senders": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "*",
            "port": 8102
          }
        ]
      }
    },
    {
      "name": "eventbuilder01",
      "host": "localhost",
      "port": 5559,
      "type": "EventBuilderFaser",
      "loglevel": {"core": "INFO", "module": "DEBUG"},
      "settings": {
	  "stats_uri": "tcp://localhost:7000",
          "influxDb_uri": "http://epdtdi-daqtest:8086/write?db=",
          "influxDb_name": "DAQlingMetrics",
          "maxPending": 10,
	  "timeout_ms": 10000
      },
      "connections": {
        "receivers": [
          {
            "type": "pair",
            "chid": 0,
            "transport": "tcp",
            "host": "localhost",
            "port": 8100
          },
          {
            "type": "pair",
            "chid": 1,
            "transport": "tcp",
            "host": "localhost",
            "port": 8101
          },
          {
            "type": "pair",
            "chid": 3,
            "transport": "tcp",
            "host": "localhost",
            "port": 8102
          }
        ],
        "senders": [
          {
            "type": "pubsub",
            "chid": 100,
            "transport": "tcp",
            "host": "*",
            "port": 8200
          },
          {
            "type": "pubsub",
            "chid": 101,
            "transport": "tcp",
            "host": "*",
            "port": 8201
          },
          {
            "type": "pubsub",
            "chid": 102,
            "transport": "tcp",
            "host": "*",
            "port": 8202
          },
          {
            "type": "pubsub",
            "chid": 103,
            "transport": "tcp",
            "host": "*",
            "port": 8203
          },
          {
            "type": "pubsub",
            "chid": 116,
            "transport": "tcp",
            "host": "*",
            "port": 8216
          },
          {
            "type": "pubsub",
            "chid": 117,
            "transport": "tcp",
            "host": "*",
            "port": 8217
          },
          {
            "type": "pubsub",
            "chid": 118,
            "transport": "tcp",
            "host": "*",
            "port": 8218
          }
        ]
      }
    },
    {
      "name": "filewriter",
      "host": "localhost",
      "port": 5560,
      "type": "FileWriterFaser",
      "loglevel": {"core": "INFO", "module": "INFO"},
      "settings": {
	  "stats_uri": "tcp://localhost:7000",
	  "max_filesize": 500000,
	  "buffer_size": 4000,
	  "filename_pattern": "/tmp/cantel/Faser-tlbtrbdigi-test--%c-%r-%n.raw",
	  "channel_names": ["Physics","Calibration","Monitoring","TLBMonitoring",
			    "Corrupted","Incomplete","Duplicate"]
      },
      "connections": {
        "receivers": [
          {
            "type": "pubsub",
            "chid": 0,
            "transport": "tcp",
            "host": "localhost",
            "port": 8200
          },
          {
            "type": "pubsub",
            "chid": 1,
            "transport": "tcp",
            "host": "localhost",
            "port": 8201
          },
          {
            "type": "pubsub",
            "chid": 2,
            "transport": "tcp",
            "host": "localhost",
            "port": 8202
          },
          {
            "type": "pubsub",
            "chid": 3,
            "transport": "tcp",
            "host": "localhost",
            "port": 8203
          },
          {
            "type": "pubsub",
            "chid": 4,
            "transport": "tcp",
            "host": "localhost",
            "port": 8216
          },
          {
            "type": "pubsub",
            "chid": 5,
            "transport": "tcp",
            "host": "localhost",
            "port": 8217
          },
          {
            "type": "pubsub",
            "chid": 6,
            "transport": "tcp",
            "host": "localhost",
            "port": 8218
          }
        ]
      }
    }
  ]
}
